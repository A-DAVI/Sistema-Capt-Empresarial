PLANO ‚Äì 2025-12-04 14:35
Objetivo: consolidar separa√ß√£o UI x l√≥gica na branch refatora√ß√£o-UI e manter registro centralizado de passos.

Passos atuais
1) Remover acessos diretos no app.py [EM PROGRESSO]
   - Trocar qualquer load_data/save_data por repository/services.
   - Exportar apenas via services.export (PDF/CSV), sem generate_pdf_report direto.

2) Unificar filtros/resumo via services [EM PROGRESSO]
   - Usar services.expenses.filtro_registros em gest√£o, resumo e relat√≥rio.
   - ‚úîÔ∏è Card/resumo j√° usa services.expenses.resumo_kpis.
   - Faltante: se houver somas em outros pontos, mover para services.dashboard.

3) Limpar combos/cat√°logos [EM PROGRESSO]
   - ‚úîÔ∏è Categorias/fornecedores/formas agora vindas de services.catalogs (bases centralizadas).
   - Faltante: revisar se ainda existe lista hardcoded residual nos modais/edi√ß√£o; alinhar updates com service se necess√°rio.

4) Revis√£o de imports/encoding [PENDENTE]
   - UI depende apenas de services/repo/utils (sem util/report direto).
   - Garantir UTF-8 intacto nos arquivos tocados.

5) Verifica√ß√£o r√°pida [PENDENTE]
   - Validar fluxo manual (filtros ‚Üí resumo/cards ‚Üí export) ou py_compile app/ui/app.py.

6) Pr√≥ximos ajustes para UI 100% sem l√≥gica [PENDENTE]
   - Extrair CRUD de despesas (add/editar/excluir) e normaliza√ß√£o de registro para services/repo.
   - Mover regras de ‚Äúcategoria exige fornecedor‚Äù e merges de cat√°logos para services.catalogs (UI apenas consome).
   - Centralizar valida√ß√£o de campos (datas/valores) e filtros em services (UI s√≥ l√™ campos e chama fun√ß√µes).
   - Deixar UI apenas com: leitura de campos, chamadas a services/repo, e renderiza√ß√£o de resultados.

7) L√≥gica ainda na UI (app.py) a migrar [EM PROGRESSO]
   - ‚úîÔ∏è Edi√ß√£o/atualiza√ß√£o e exclus√£o agora via services.expenses (montar/atualizar/remover).
   - Pendente: regras de categoria x fornecedor (fornecedor_ativo, toggle) e normaliza√ß√µes ligadas ao tipo.
   - Pendente: formata√ß√£o/valida√ß√£o de campos (datas/valores) e configura√ß√£o de filtros/combos diretamente na UI.
   - üü¢ Formata√ß√£o de data/valor e montagem de filtros agora via services.expenses (montar_filtros_ui, formatar_*_input).
   - Pendente final: revisar se ainda h√° valida√ß√µes/normaliza√ß√µes residuais nos modais/filtros e combos; ajustar se necess√°rio.
